# AS400-数据库文件管理
记录学习或遇到的AS/400中数据库相关知识。官方参考链接：
- [IBM i 7.3数据库文件管理](https://www.ibm.com/docs/zh/i/7.3?topic=systems-database-file-management)

## 性能管理
参考链接：[IBM i 7.3数据库文件管理-性能](https://www.ibm.com/docs/zh/i/7.3?topic=management-performance)
## 官方示例
### 检索访问指定文件的查询
官方参考链接：[Example: Finding the queries that accessed a specific file](https://www.ibm.com/docs/en/i/7.2?topic=ssw_ibm_i_72/rzate/rzatefindqueryex.htm)

## 物理文件和逻辑文件
Physical Files：
- 物理文件包含存储在系统上的实际数据，以及数据如何呈现给程序或从程序接收的描述
- 它们只包含一种记录格式和一个或多个成员
- 数据库文件中的记录可以是外部的，也可以是程序描述的
- 物理文件可以具有键控序列访问路径，这意味着数据根据文件中的一个或多个关键字段按顺序呈现给程序

Logical Files：
- 逻辑文件不包含数据
- 包含在一个或多个物理文件中找到的记录的描述
- 逻辑文件是一个或多个物理文件的视图或表示
- 包含一种以上格式的逻辑文件称为多格式逻辑文件。
- 如果用户的程序处理包含多个记录格式的逻辑文件，用户可以使用按记录格式读取来设置您希望使用的格式

官方参考链接：[IBM i 7.3 Physical Files and Logical Files](https://www.ibm.com/docs/zh/i/7.3?topic=files-physical-logical)
### Physical Files
参考链接：[IBM i 7.3 Setting up physical files](https://www.ibm.com/docs/zh/ssw_ibm_i_73/dbp/rbafophysf.htm)
#### 创建Physical Files
使用命令`CRTPF`(Create Physical File)创建，示例如下：
```
CRTPF FILE(PAYLIB/PAYTXS) SRCFILE(SRCLIB/PAYTXS)
    MBR(*NONE) MAXMBRS(5)
```
示例说明：
- 示例在`PAYLIB`库中创建`PAYTXS`物理文件
- `SRCLIB`库中源文件`PAYTXS`中的成员`PAYTXS`中的源描述用于创建物理文件
- `MBR(*NONE)`创建的文件没有成员，在以后添加成员之前，不能将任何数据放入文件中
- 文件中最多可以包含五个成员
- 默认情况下，以后添加的每个文件成员将包含数据记录。每个成员的访问路径将持续保持。
- 默认情况下，在自动扩展（最多三个增量）发生之前，每个成员最多可以有10000条记录，自动扩展会将1000条记录添加到成员的容量中
- 默认情况下，每个成员的存储空间仅在需要时分配，不限制空间是否连续；没有初始存储分配
- 默认情况下，公共对象具有文件的操作、读取、添加、删除和更新权限

### Logical Files